<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Crypto Chat</title>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/emojione/2.2.6/assets/css/emojione.min.css"/>
        <link rel="stylesheet" href="/static/style.css">
    </head>
    <body>
        <header>
            <nav>
                <div class="nav-wrapper">
                    <a href="/" class="brand-logo right">Crypto Chat</a>
                </div>
            </nav>
        </header>

        <main id="app">

            <div class="row" v-if="joined">
                <div class="col s12 m6">
                    <div class="card chatroom">
                        <div class="card-title">
                            <span></span>
                            <button class="right waves-effect waves-light btn red btn-small" @click="close()">
                                <i class="material-icons">close</i>
                            </button>
                        </div>
                        <div id="chat-messages" class="card-content" v-html="chatContent"></div>
                        <div class="card-action">
                            <div class="input-field input-group">
                                <input id="message" type="text" v-model="newMsg" @keyup.enter="send" class="validate">
                                <label for="message">Message</label>
                                <span class="suffix">
                                    <a class="waves-effect waves-light btn btn-floating" @click="send">
                                        <i class="material-icons">chat</i>
                                    </a>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row" v-if="!joined">
                <div class="input-field col s4">
                    <input type="text" v-model.trim="chatroom" placeholder="Chat room">
                </div>
                <div class="input-field col s4">
                    <input type="text" v-model.trim="passphrase" placeholder="Passphrase">
                </div>
                <div class="input-field col s4">
                    <button class="waves-effect waves-light btn" @click="join()">
                        <i class="material-icons right">done</i>
                        Join
                    </button>
                </div>
            </div>

        </main>
        <footer class="page-footer">
        </footer>
        <script src="https://unpkg.com/vue@2.1.3/dist/vue.min.js"></script>
        <script src="https://cdn.jsdelivr.net/emojione/2.2.6/lib/js/emojione.min.js"></script>
        <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/md5.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>

        <script>
            var user = {
                username: '{{.Username}}',
                email: '{{.Email}}'
            };
        </script>

        <script src="/static/app.js"></script>
    </body>
</html>
